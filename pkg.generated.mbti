// Generated using `moon info`, DON'T EDIT IT
package "peter-jerry-ye/codex"

import(
  "moonbitlang/core/json"
  "peter-jerry-ye/codex/generator"
)

// Values

// Errors

// Types and methods
pub(all) enum ApprovalMode {
  Never
  OnRequest
  OnFailure
  Untrusted
}
impl ToJson for ApprovalMode
impl @json.FromJson for ApprovalMode

type Codex
fn Codex::new(options? : CodexOptions) -> Self
fn Codex::resume_thread(Self, String, options? : ThreadOptions) -> Thread
fn Codex::start_thread(Self, options? : ThreadOptions) -> Thread

type CodexExecArgs
fn CodexExecArgs::new(String, base_url? : String, api_key? : String, thread_id? : String, model? : String, sandbox_mode? : SandboxMode, working_directory? : String, skip_git_repo_check? : Bool, output_schema_file? : String) -> Self

type CodexOptions
fn CodexOptions::new(codex_path_override? : String, base_url? : String, api_key? : String) -> Self
impl ToJson for CodexOptions
impl @json.FromJson for CodexOptions

pub enum CommandExecutionStatus {
  InProgress
  Completed
  Failed
}
impl Show for CommandExecutionStatus
impl ToJson for CommandExecutionStatus
impl @json.FromJson for CommandExecutionStatus

pub enum Event {
  ThreadStarted(thread_id~ : String)
  TurnStarted
  TurnCompleted(Usage)
  TurnFailed(ThreadError)
  ItemStarted(ThreadItem)
  ItemUpdated(ThreadItem)
  ItemCompleted(ThreadItem)
  ThreadErrorEvent(String)
}
impl ToJson for Event
impl @json.FromJson for Event

pub struct FileUpdateChange {
  path : String
  kind : PatchChangeKind
}
impl Show for FileUpdateChange
impl ToJson for FileUpdateChange
impl @json.FromJson for FileUpdateChange

pub enum McpToolCallStatus {
  InProgress
  Completed
  Failed
}
impl Show for McpToolCallStatus
impl ToJson for McpToolCallStatus
impl @json.FromJson for McpToolCallStatus

pub enum PatchApplyStatus {
  Completed
  Failed
}
impl Show for PatchApplyStatus
impl ToJson for PatchApplyStatus
impl @json.FromJson for PatchApplyStatus

pub enum PatchChangeKind {
  Add
  Delete
  Update
}
impl Show for PatchChangeKind
impl ToJson for PatchChangeKind
impl @json.FromJson for PatchChangeKind

pub(all) enum SandboxMode {
  ReadOnly
  WorkspaceWrite
  DangerFullAccess
}
impl ToJson for SandboxMode
impl @json.FromJson for SandboxMode

#alias(RunStreamedResult)
pub struct StreamedTurn {
  events : @generator.AsyncGenerator[Event]
}

type Thread
fn Thread::id(Self) -> String?
async fn Thread::run(Self, String, turn_options? : TurnOptions) -> Turn
async fn Thread::run_streamed(Self, String, turn_options? : TurnOptions) -> StreamedTurn

pub struct ThreadError {
  message : String
}
impl ToJson for ThreadError
impl @json.FromJson for ThreadError

pub enum ThreadItem {
  AgentMessageItem(id~ : String, text~ : String)
  ReasoningItem(id~ : String, text~ : String)
  CommandExecutionItem(id~ : String, command~ : String, aggregated_output~ : String, exit_code~ : Int?, status~ : CommandExecutionStatus)
  FileChangeItem(id~ : String, changes~ : Array[FileUpdateChange], status~ : PatchApplyStatus)
  McpToolCallItem(id~ : String, server~ : String, tool~ : String, status~ : McpToolCallStatus)
  WebSearchItem(id~ : String, query~ : String)
  TodoListItem(id~ : String, items~ : Array[TodoItem])
  ErrorItem(id~ : String, message~ : String)
}
impl ToJson for ThreadItem
impl @json.FromJson for ThreadItem

type ThreadOptions
fn ThreadOptions::new(model? : String, sandbox_mode? : SandboxMode, working_directory? : String, skip_git_repo_check? : Bool) -> Self
impl ToJson for ThreadOptions
impl @json.FromJson for ThreadOptions

pub struct TodoItem {
  text : String
  completed : Bool
}
impl Show for TodoItem
impl ToJson for TodoItem
impl @json.FromJson for TodoItem

#alias(RunResult)
pub struct Turn {
  items : Array[ThreadItem]
  final_response : String
  usage : Usage?
}

type TurnOptions
fn TurnOptions::new(output_schema? : Json) -> Self
impl ToJson for TurnOptions
impl @json.FromJson for TurnOptions

pub struct Usage {
  input_tokens : Int
  cached_input_tokens : Int
  output_tokens : Int
}
impl ToJson for Usage
impl @json.FromJson for Usage

// Type aliases
pub type Input = String

// Traits

